<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hello D3</title>
  <script src="d3.js"></script>
  <style>
  </style>
</head>
<body>
  <script>
    // 1
    function render1(data) {
      d3.select('body').selectAll('div.h-bar1')
        .data(data)
        .enter()
        .append('div')
          .attr('class','h-bar1')
        .attr('style','background:#eee')
        .append('span');
      d3.select('body').selectAll('div.h-bar1')
        .data(data)
        .style('width',function(d) {
          return d*3+'px';
        })
        .select('span')
        .text(function(d) {
          return d;
        });
      d3.select('body').selectAll('div.h-bar1')
        .data(data)
        .exit()
        .remove()
    }
    var data1 = [10,20,16,50,88,44,19,90];
    setInterval(function() {
      data1.shift();
      data1.push(Math.round(Math.random()*200));
      render1(data1);
    }, 1500)
    render1(data1);
    // 2
    var data2 = [
      {width: 10,color:23},
      {width: 20,color:40},
      {width: 30,color:22},
      {width: 40,color:5}
    ]
    var colorScale = d3.scale.linear().domain([0,100]).range(['#add8e6','blue']);
    function render2(data) {
      d3.select('body').selectAll('.h-bar2')
        .data(data)
        .enter()
        .append('div')
          .attr('class','h-bar2')
        .append('span')
      d3.select('body').selectAll('.h-bar2')
        .data(data)
        .exit()
        .remove()
      d3.select('body').selectAll('.h-bar2')
        .data(data)
          // .attr('class','h-bar2')
        .style('width',function(d) {
          return d.width*10+'px';
        })
        .style('background-color',function(d) {
          return colorScale(d.color);
        })
        .select('span')
          .text(function(d) {
            return d.width
          })
    }
    function randomValue() {
      return Math.round(Math.random()*100)
    }
    setInterval(function() {
      data2.shift();
      data2.push({width:randomValue(),color:randomValue()});
      render2(data2);
    }, 1500)
    render2(data2);

  </script>
</body>
</html>